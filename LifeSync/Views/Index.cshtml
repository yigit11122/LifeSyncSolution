<!DOCTYPE html>
<html>
<head>
    <title>LifeSync Dashboard</title>
    <link rel="stylesheet" href="/css/site.css">
</head>
<body>
    <h1>LifeSync Dashboard</h1>

    <div>
        <button id="connect-todoist">Connect with Todoist</button>
        <h2>Todoist Görevlerim</h2>
        <div id="todoist-list"></div>
    </div>

    <div>
        <button id="connect-google">Connect with Google Calendar</button>
        <h2>Google Takvim Etkinliklerim</h2>
        <div id="googleCalendar-list"></div>
    </div>

    <div>
        <button id="connect-notion">Connect with Notion</button>
        <h2>Notion Sayfalarım</h2>
        <div id="notion-list"></div>
    </div>

    <div>
        <button id="fetch-lifeSync">Fetch LifeSync Data</button>
        <h2>LifeSync Verilerim</h2>
        <div id="lifeSync-list"></div>
    </div>

    <script src="/js/site.js"></script>
    <script src="/js/todoist.js"></script>
    <script src="/js/googleCalendar.js"></script>
    <script src="/js/notion.js"></script>
    <script src="/js/lifeSync.js"></script>

    <script>
        // Butonlara tıklama olaylarını ekle
        document.getElementById('connect-todoist').addEventListener('click', initiateTodoistOAuth);
        document.getElementById('connect-google').addEventListener('click', initiateGoogleCalendarOAuth);
        document.getElementById('connect-notion').addEventListener('click', initiateNotionOAuth);
        document.getElementById('fetch-lifeSync').addEventListener('click', startLifeSyncPolling);

        // Sayfa yüklendiğinde çalışacak kod
        window.onload = async () => {
            // Todoist
            const todoistTasks = await fetchDataFromBackend('todoist');
            if (todoistTasks) displayData(todoistTasks, 'todoist');
            startTodoistPolling();

            // Google Calendar
            const googleEvents = await fetchDataFromBackend('googleCalendar');
            if (googleEvents) displayData(googleEvents, 'googleCalendar');
            startGoogleCalendarPolling();

            // Notion
            const notionPages = await fetchDataFromBackend('notion');
            if (notionPages) displayData(notionPages, 'notion');
            startNotionPolling();

            // LifeSync
            const lifeSyncData = await fetchDataFromBackend('lifeSync');
            if (lifeSyncData) displayData(lifeSyncData, 'lifeSync');
        };
    </script>
</body>
</html>